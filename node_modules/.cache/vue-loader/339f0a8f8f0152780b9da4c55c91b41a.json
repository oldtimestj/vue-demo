{"remainingRequest":"/Users/tongjie/Desktop/VueProject/vuecli4-demo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/tongjie/Desktop/VueProject/vuecli4-demo/src/components/PlSelect.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tongjie/Desktop/VueProject/vuecli4-demo/src/components/PlSelect.vue","mtime":1591939319761},{"path":"/Users/tongjie/Desktop/VueProject/vuecli4-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tongjie/Desktop/VueProject/vuecli4-demo/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/tongjie/Desktop/VueProject/vuecli4-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tongjie/Desktop/VueProject/vuecli4-demo/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnUGxTZWxlY3QnLAogIHByb3BzOiB7CiAgICB2YWx1ZTogewogICAgICB0eXBlOiBbQXJyYXksIFN0cmluZ10sCiAgICAgIGRlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuICcnOwogICAgICB9LAogICAgfSwKICAgIG9wdGlvbnM6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9LAogICAgfSwKICAgIG9wdGlvblByb3BzOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4geyB2YWx1ZTogJ3ZhbHVlJywgbGFiZWw6ICdsYWJlbCcgfTsKICAgICAgfSwKICAgIH0sCiAgICBoYXNTZWxlY3RBbGw6IEJvb2xlYW4sCiAgICBtdWx0aXBsZTogQm9vbGVhbiwKICB9LAogIGNvbXB1dGVkOiB7CiAgICBpc0FsbFNlbGVjdGVkKCkgewogICAgICByZXR1cm4gdGhpcy52YWx1ZS5sZW5ndGggPT09IHRoaXMub3B0aW9uc0xlbmd0aDsKICAgIH0sCiAgICBpc05vbmVTZWxlY3RlZCgpIHsKICAgICAgcmV0dXJuIHRoaXMudmFsdWUubGVuZ3RoID09PSAwOwogICAgfSwKICAgIG9wdGlvbnNMZW5ndGgoKSB7CiAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMubGVuZ3RoOwogICAgfSwKICAgIGVuYWJsZVNlbGVjdEFsbCgpIHsKICAgICAgcmV0dXJuIHRoaXMubXVsdGlwbGUgJiYgdGhpcy5oYXNTZWxlY3RBbGw7CiAgICB9LAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgIHZhbHVlOiB7CiAgICAgIGFzeW5jIGhhbmRsZXIodmFsKSB7CiAgICAgICAgaWYgKCF0aGlzLmVuYWJsZVNlbGVjdEFsbCkgcmV0dXJuOwogICAgICAgIGlmICh2YWwubGVuZ3RoID09PSB0aGlzLm9wdGlvbnNMZW5ndGgpIHsKICAgICAgICAgIGF3YWl0IHRoaXMuJG5leHRUaWNrKCk7CiAgICAgICAgICB0aGlzLmdldEVsU2VsZWN0VGFnc0RvbSgpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICB0aGlzLmdldEVsU2VsZWN0SW5wdXREb20oKS52YWx1ZSA9ICflhajpg6gnOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTApKTsKICAgICAgICAgIHRoaXMuZ2V0RWxTZWxlY3RUYWdzRG9tKCkuc3R5bGUuZGlzcGxheSA9ICcnOwogICAgICAgICAgdGhpcy5nZXRFbFNlbGVjdElucHV0RG9tKCkudmFsdWUgPSAnJzsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGltbWVkaWF0ZTogdHJ1ZSwKICAgIH0sCiAgfSwKICBtZXRob2RzOiB7CiAgICBjbGlja1NlbGVjdEFsbCgpIHsKICAgICAgdGhpcy4kZW1pdCgnaW5wdXQnLCB0aGlzLmlzQWxsU2VsZWN0ZWQgPyBbXSA6IHRoaXMub3B0aW9ucy5tYXAoaXRlbSA9PiBpdGVtW3RoaXMub3B0aW9uUHJvcHMudmFsdWVdKSk7CiAgICB9LAogICAgZ2V0RWxTZWxlY3RUYWdzRG9tKCkgewogICAgICB0aGlzLmVsU2VsZWN0VGFnc0RvbSA9IHRoaXMuZWxTZWxlY3RUYWdzRG9tIHx8IHRoaXMuJHJlZnMuc2VsZWN0LiRlbC5xdWVyeVNlbGVjdG9yKCcuZWwtc2VsZWN0X190YWdzJyk7CiAgICAgIHJldHVybiB0aGlzLmVsU2VsZWN0VGFnc0RvbTsKICAgIH0sCiAgICBnZXRFbFNlbGVjdElucHV0RG9tKCkgewogICAgICB0aGlzLmVsU2VsZWN0SW5wdXREb20gPSB0aGlzLmVsU2VsZWN0SW5wdXREb20gfHwgdGhpcy4kcmVmcy5zZWxlY3QuJGVsLnF1ZXJ5U2VsZWN0b3IoJy5lbC1pbnB1dF9faW5uZXInKTsKICAgICAgcmV0dXJuIHRoaXMuZWxTZWxlY3RJbnB1dERvbTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["PlSelect.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PlSelect.vue","sourceRoot":"src/components","sourcesContent":["<!--\nCreated by zhulixiao on 2020/5/11.\n-->\n<template>\n  <el-select\n    class=\"pl-select\"\n    :class=\"{'pl-select-all': enableSelectAll}\"\n    :popper-append-to-body=\"false\"\n    ref=\"select\"\n    :value=\"value\"\n    :multiple=\"multiple\"\n    v-bind=\"$attrs\"\n    v-on=\"$listeners\"\n  >\n    <li\n      v-if=\"enableSelectAll\"\n      @mouseenter.prevent=\"$refs.select.hoverIndex = Infinity\"\n      @click.prevent=\"clickSelectAll\"\n      class=\"el-select-dropdown__item\"\n    >\n      <el-checkbox\n        :indeterminate=\"!isAllSelected && !isNoneSelected\"\n        :value=\"isAllSelected\"\n      >\n        全选\n      </el-checkbox>\n    </li>\n    <el-option\n      v-for=\"item in options\"\n      :key=\"item[optionProps.value]\"\n      ref=\"option\"\n      :value=\"item[optionProps.value]\"\n      :label=\"item[optionProps.label]\"\n    >\n      <span v-if=\"enableSelectAll\" @click.prevent>\n        <el-checkbox\n          :value=\"value.indexOf(item[optionProps.value]) > -1\"\n          :label=\"item[optionProps.label]\"\n        />\n      </span>\n      <template v-else>{{item[optionProps.label]}}</template>\n    </el-option>\n    <template slot=\"empty\"><slot name=\"empty\"></slot></template>\n    <template slot=\"prefix\"><slot name=\"prefix\"></slot></template>\n  </el-select>\n</template>\n\n<script>\n  export default {\n    name: 'PlSelect',\n    props: {\n      value: {\n        type: [Array, String],\n        default() {\n          return '';\n        },\n      },\n      options: {\n        type: Array,\n        default() {\n          return [];\n        },\n      },\n      optionProps: {\n        type: Object,\n        default() {\n          return { value: 'value', label: 'label' };\n        },\n      },\n      hasSelectAll: Boolean,\n      multiple: Boolean,\n    },\n    computed: {\n      isAllSelected() {\n        return this.value.length === this.optionsLength;\n      },\n      isNoneSelected() {\n        return this.value.length === 0;\n      },\n      optionsLength() {\n        return this.options.length;\n      },\n      enableSelectAll() {\n        return this.multiple && this.hasSelectAll;\n      },\n    },\n    data() {\n      return {\n      };\n    },\n    watch: {\n      value: {\n        async handler(val) {\n          if (!this.enableSelectAll) return;\n          if (val.length === this.optionsLength) {\n            await this.$nextTick();\n            this.getElSelectTagsDom().style.display = 'none';\n            this.getElSelectInputDom().value = '全部';\n          } else {\n            await new Promise(resolve => setTimeout(resolve, 10));\n            this.getElSelectTagsDom().style.display = '';\n            this.getElSelectInputDom().value = '';\n          }\n        },\n        immediate: true,\n      },\n    },\n    methods: {\n      clickSelectAll() {\n        this.$emit('input', this.isAllSelected ? [] : this.options.map(item => item[this.optionProps.value]));\n      },\n      getElSelectTagsDom() {\n        this.elSelectTagsDom = this.elSelectTagsDom || this.$refs.select.$el.querySelector('.el-select__tags');\n        return this.elSelectTagsDom;\n      },\n      getElSelectInputDom() {\n        this.elSelectInputDom = this.elSelectInputDom || this.$refs.select.$el.querySelector('.el-input__inner');\n        return this.elSelectInputDom;\n      },\n    },\n  };\n</script>\n\n<style lang=\"scss\" scoped>\n  .pl-select-all {\n    ::v-deep {\n      .el-select-dropdown.is-multiple .el-select-dropdown__item.selected::after {\n        display: none;\n      }\n    }\n  }\n</style>\n"]}]}