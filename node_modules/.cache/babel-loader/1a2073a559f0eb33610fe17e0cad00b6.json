{"remainingRequest":"/Users/tongjie/Desktop/VueProject/vuecli4-demo/node_modules/babel-loader/lib/index.js!/Users/tongjie/Desktop/VueProject/vuecli4-demo/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/tongjie/Desktop/VueProject/vuecli4-demo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/tongjie/Desktop/VueProject/vuecli4-demo/src/components/PlPopoverWord.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tongjie/Desktop/VueProject/vuecli4-demo/src/components/PlPopoverWord.vue","mtime":1591939319760},{"path":"/Users/tongjie/Desktop/VueProject/vuecli4-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tongjie/Desktop/VueProject/vuecli4-demo/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/tongjie/Desktop/VueProject/vuecli4-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tongjie/Desktop/VueProject/vuecli4-demo/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLnRvLWZpeGVkIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdCI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IGRlYm91bmNlIH0gZnJvbSAnbG9kYXNoJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdQbFBvcG92ZXJXb3JkJywKICBwcm9wczogewogICAgbGluZTogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IDEKICAgIH0sCiAgICBjb250ZW50OiBTdHJpbmcsCiAgICBsZW5ndGg6IE51bWJlciwKICAgIHBsYWNlbWVudDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICd0b3AnCiAgICB9LAogICAgdHJpZ2dlcjogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICdob3ZlcicKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpc0luaXQ6IGZhbHNlLAogICAgICBkaXNhYmxlZDogdHJ1ZSwKICAgICAgY29udGFpbmVyTWF4SGVpZ2h0OiAnaW5oZXJpdCcsCiAgICAgIHQ6IDAsCiAgICAgIGFiYzogZmFsc2UsCiAgICAgIGNXaWR0aDogMAogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBmb3JtYXRDb250ZW50OiBmdW5jdGlvbiBmb3JtYXRDb250ZW50KCkgewogICAgICByZXR1cm4gIiIuY29uY2F0KHRoaXMuY29udGVudCB8fCAnJykucmVwbGFjZSgvXHMvZywgJyZuYnNwOycpOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIGlmICghdGhpcy5pc0luaXQgJiYgIXRoaXMubGVuZ3RoKSB7CiAgICAgIHRoaXMuaXNJbml0ID0gdHJ1ZTsKICAgICAgdGhpcy5zZXREaXNhYmxlZERlYm91bmNlID0gZGVib3VuY2UodGhpcy5zZXREaXNhYmxlZCwgNTAwKTsKICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuc2V0RGlzYWJsZWREZWJvdW5jZSk7CiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLnNldERpc2FibGVkRGVib3VuY2UpOwogICAgfQoKICAgIHRoaXMuc2V0RGlzYWJsZWQoKTsKICB9LAogIGJlZm9yZURlc3Ryb3k6IGZ1bmN0aW9uIGJlZm9yZURlc3Ryb3koKSB7CiAgICB0aGlzLnQgJiYgY2xlYXJUaW1lb3V0KHRoaXMudCk7CiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5zZXREaXNhYmxlZERlYm91bmNlKTsKICB9LAogIHdhdGNoOiB7CiAgICBjb250ZW50OiBmdW5jdGlvbiBjb250ZW50KCkgewogICAgICB0aGlzLnNldERpc2FibGVkKCk7CiAgICB9LAogICAgbGluZTogZnVuY3Rpb24gbGluZSgpIHsKICAgICAgdGhpcy5zZXREaXNhYmxlZCgpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgZ2V0Q29udGFpbmVyRG9tOiBmdW5jdGlvbiBnZXRDb250YWluZXJEb20oKSB7CiAgICAgIHRoaXMuY29udGFpbmVyRG9tID0gdGhpcy5jb250YWluZXJEb20gfHwgdGhpcy4kcmVmcy5jb250YWluZXI7CiAgICAgIHJldHVybiB0aGlzLmNvbnRhaW5lckRvbTsKICAgIH0sCiAgICBnZXRDb250ZW50RG9tOiBmdW5jdGlvbiBnZXRDb250ZW50RG9tKCkgewogICAgICB0aGlzLmNvbnRlbnREb20gPSB0aGlzLmNvbnRlbnREb20gfHwgdGhpcy4kcmVmcy5jb250ZW50OwogICAgICByZXR1cm4gdGhpcy5jb250ZW50RG9tOwogICAgfSwKICAgIGNhbGNMZW5ndGg6IGZ1bmN0aW9uIGNhbGNMZW5ndGgoKSB7CiAgICAgIGlmICh0aGlzLmxlbmd0aCkgcmV0dXJuIHRoaXMubGVuZ3RoOwoKICAgICAgaWYgKHdpbmRvdy5uYXZpZ2F0b3IubXNTYXZlQmxvYikgewogICAgICAgIHZhciBmb250U2l6ZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMuZ2V0Q29udGVudERvbSgpKS5mb250U2l6ZS5zcGxpdCgncHgnKVswXSAvIDI7CiAgICAgICAgdmFyIGNvbnRhaW5lcldpZHRoID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5nZXRDb250YWluZXJEb20oKSkud2lkdGguc3BsaXQoJ3B4JylbMF0gKiAxOwogICAgICAgIHJldHVybiAoY29udGFpbmVyV2lkdGggLyBmb250U2l6ZSkudG9GaXhlZCgwKSAqIHRoaXMubGluZSArIDE7CiAgICAgIH0KCiAgICAgIHZhciBfdGhpcyRnZXRDb250ZW50RG9tJGcgPSB0aGlzLmdldENvbnRlbnREb20oKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwKICAgICAgICAgIGNXaWR0aCA9IF90aGlzJGdldENvbnRlbnREb20kZy53aWR0aCwKICAgICAgICAgIGNIZWlnaHQgPSBfdGhpcyRnZXRDb250ZW50RG9tJGcuaGVpZ2h0OwoKICAgICAgdmFyIF90aGlzJGdldENvbnRhaW5lckRvbSA9IHRoaXMuZ2V0Q29udGFpbmVyRG9tKCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksCiAgICAgICAgICB3aWR0aCA9IF90aGlzJGdldENvbnRhaW5lckRvbS53aWR0aCwKICAgICAgICAgIGhlaWdodCA9IF90aGlzJGdldENvbnRhaW5lckRvbS5oZWlnaHQ7CgogICAgICBpZiAodGhpcy5saW5lID4gMSkgcmV0dXJuIGNIZWlnaHQgPiBoZWlnaHQgPyAwIDogSW5maW5pdHk7CiAgICAgIHJldHVybiBjV2lkdGggPiB3aWR0aCA/IDAgOiBJbmZpbml0eTsKICAgIH0sCiAgICBjYWxjU3RyTGVuOiBmdW5jdGlvbiBjYWxjU3RyTGVuKHN0cikgewogICAgICB2YXIgbGVuID0gMDsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSArPSAxKSB7CiAgICAgICAgaWYgKHN0ci5jaGFyQ29kZUF0KGkpID4gMCAmJiBzdHIuY2hhckNvZGVBdChpKSA8IDEyOCkgbGVuICs9IDE7ZWxzZSBsZW4gKz0gMjsKICAgICAgfQoKICAgICAgcmV0dXJuIGxlbjsKICAgIH0sCiAgICBzZXREaXNhYmxlZDogZnVuY3Rpb24gc2V0RGlzYWJsZWQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLnNldENvbnRhaW5lck1heEhlaWdodCgpOwogICAgICB0aGlzLnQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpcy5kaXNhYmxlZCA9ICFfdGhpcy5jb250ZW50IHx8IF90aGlzLmNhbGNTdHJMZW4oX3RoaXMuY29udGVudCkgPCBfdGhpcy5jYWxjTGVuZ3RoKCk7CiAgICAgIH0sIDEwMCk7CiAgICB9LAogICAgc2V0Q29udGFpbmVyTWF4SGVpZ2h0OiBmdW5jdGlvbiBzZXRDb250YWluZXJNYXhIZWlnaHQoKSB7CiAgICAgIGlmICghdGhpcy5jb250ZW50IHx8IHRoaXMubGluZSA8PSAxIHx8ICF0aGlzLmdldENvbnRlbnREb20oKSkgcmV0dXJuOwogICAgICB0aGlzLmNvbnRhaW5lck1heEhlaWdodCA9ICIiLmNvbmNhdCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmdldENvbnRlbnREb20oKSkubGluZUhlaWdodC5zcGxpdCgncHgnKVswXSAqIHRoaXMubGluZSwgInB4Iik7CiAgICB9LAogICAgY2xpY2tDb250ZW50OiBmdW5jdGlvbiBjbGlja0NvbnRlbnQoKSB7CiAgICAgIHRoaXMuJGVtaXQoJ2NsaWNrJyk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["PlPopoverWord.vue"],"names":[],"mappings":"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","sourcesContent":["<!--\nCreated by zhulixiao on 2020/5/7.\n-->\n<template>\n  <div class=\"pl-popover-word\">\n    <el-popover\n      :disabled=\"disabled\"\n      :trigger=\"trigger\"\n      :placement=\"placement\"\n      popper-class=\"pl-popover-word-reference\"\n      ref=\"pop\"\n    >\n      <p style=\"max-width: 300px\" slot v-html=\"formatContent\"></p>\n      <p\n        slot=\"reference\"\n        ref=\"container\"\n        :class=\"line > 1 ? 'ellipsis-lines' : 'ellipsis'\"\n        :style=\"{webkitLineClamp: this.line, maxHeight: containerMaxHeight}\"\n        style=\"height: inherit;\"\n      >\n        <span @click=\"clickContent\" ref=\"content\" v-html=\"formatContent\"></span>\n      </p>\n    </el-popover>\n  </div>\n</template>\n\n<script>\n  import { debounce } from 'lodash';\n\n  export default {\n    name: 'PlPopoverWord',\n    props: {\n      line: {\n        type: Number,\n        default: 1,\n      },\n      content: String,\n      length: Number,\n      placement: {\n        type: String,\n        default: 'top',\n      },\n      trigger: {\n        type: String,\n        default: 'hover',\n      },\n    },\n    data() {\n      return {\n        isInit: false,\n        disabled: true,\n        containerMaxHeight: 'inherit',\n        t: 0,\n        abc: false,\n        cWidth: 0,\n      };\n    },\n    computed: {\n      formatContent() {\n        return `${this.content || ''}`.replace(/\\s/g, '&nbsp;');\n      },\n    },\n    mounted() {\n      if (!this.isInit && !this.length) {\n        this.isInit = true;\n        this.setDisabledDebounce = debounce(this.setDisabled, 500);\n        window.removeEventListener('resize', this.setDisabledDebounce);\n        window.addEventListener('resize', this.setDisabledDebounce);\n      }\n      this.setDisabled();\n    },\n    beforeDestroy() {\n      this.t && clearTimeout(this.t);\n      window.removeEventListener('resize', this.setDisabledDebounce);\n    },\n    watch: {\n      content() {\n        this.setDisabled();\n      },\n      line() {\n        this.setDisabled();\n      },\n    },\n    methods: {\n      getContainerDom() {\n        this.containerDom = this.containerDom || this.$refs.container;\n        return this.containerDom;\n      },\n      getContentDom() {\n        this.contentDom = this.contentDom || this.$refs.content;\n        return this.contentDom;\n      },\n      calcLength() {\n        if (this.length) return this.length;\n        if (window.navigator.msSaveBlob) {\n          const fontSize = window.getComputedStyle(this.getContentDom()).fontSize.split('px')[0] / 2;\n          const containerWidth = window.getComputedStyle(this.getContainerDom()).width.split('px')[0] * 1;\n          return (containerWidth / fontSize).toFixed(0) * this.line + 1;\n        }\n        const { width: cWidth, height: cHeight } = this.getContentDom().getBoundingClientRect();\n        const { width, height } = this.getContainerDom().getBoundingClientRect();\n        if (this.line > 1) return cHeight > height ? 0 : Infinity;\n        return cWidth > width ? 0 : Infinity;\n      },\n      calcStrLen(str) {\n        let len = 0;\n        for (let i = 0; i < str.length; i += 1) {\n          if (str.charCodeAt(i) > 0 && str.charCodeAt(i) < 128) len += 1;\n          else len += 2;\n        }\n        return len;\n      },\n      setDisabled() {\n        this.setContainerMaxHeight();\n        this.t = setTimeout(() => {\n          this.disabled = !this.content || this.calcStrLen(this.content) < this.calcLength();\n        }, 100);\n      },\n      setContainerMaxHeight() {\n        if (!this.content || this.line <= 1 || !this.getContentDom()) return;\n        this.containerMaxHeight = `${window.getComputedStyle(this.getContentDom()).lineHeight.split('px')[0] * this.line}px`;\n      },\n      clickContent() {\n        this.$emit('click');\n      },\n    },\n  };\n</script>\n\n<style lang=\"scss\" scoped>\n  .pl-popover-word {\n    padding: 0;\n    width: 100%;\n    overflow: hidden;\n    line-height: unset;\n    vertical-align: middle;\n  }\n  .ellipsis-lines {\n    white-space: normal;\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n  }\n</style>\n"],"sourceRoot":"src/components"}]}